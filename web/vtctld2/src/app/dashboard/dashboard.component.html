<h1>DASHBOARD</h1>
<div class="vt-row">
  <div *ngFor="let keyspace of keyspaces" class="keyspaceCard">
    <a (click)="navigate(keyspace.name)"><!---->
      <md-card>
        <md-card-title>{{keyspace.name}}</md-card-title>   
        <md-card-content >
          <div class="stats-container">
            <ul>
              <li>
                <span class="vt-stat-value-container">
                  <span class="vt-stat-value">
                    {{keyspace.servingShards.length}}
                  </span>
                </span>
                <span class="vt-stat-category">
                  Serving Shards
                </span>
              </li>
              <li>
              <span class="vt-stat-value-container">
                <span class="vt-stat-value">
                  {{keyspace.nonservingShards.length}}
                </span>
              </span>
              <span class="vt-stat-category">
                Nonserving Shards
              </span>
              </li>
              <li>
                <span *ngIf="keyspace.healthy">
                  <span class="vt-stat-value-container healthy">
                    <span class="vt-stat-value">
                      âœ“
                    </span>
                  </span>
                  <span class="vt-stat-category">
                    Healthy
                  </span>
                </span>
                <span *ngIf="!keyspace.healthy">
                  <span class="vt-stat-value-container unhealthy">
                    <span class="vt-stat-value">
                      !
                    </span>
                  </span>
                  <span class="vt-stat-category">
                    Unhealthy
                  </span>
                </span>
              </li>
            </ul>
          </div>
        </md-card-content>
        <md-card-actions>
          <div class="vt-actions-container">
            <paper-button raised onclick="modal.open()" (click)="blockClicks($event);toggleForm();deleteNKS(keyspace);">Delete</paper-button>
            <paper-button raised onclick="modal.open()" (click)="blockClicks($event);toggleForm();populateNKS(keyspace);">Edit</paper-button>
          </div>
        </md-card-actions>
      </md-card>
    </a>
  </div>
  
  <div *ngIf="keyspaces" class="keyspaceCard">
    <a onclick="modal.open()" (click)="toggleForm();clearNKS()">
      <md-card>
        <md-card-title>New Keyspace</md-card-title>   
        <md-card-content>
          <div class="vt-add-container">
            <span class="vt-add-ks">+</span>
          </div>
        </md-card-content>
        <md-card-actions>
          <div class="vt-actions-container">
            <paper-button raised >Create</paper-button>
          </div>
        </md-card-actions>
      </md-card>
    </a>
  </div>
</div>

<!--Polymer implementation of modal-->
<paper-dialog id="modal" no-cancel-on-outside-click="true" no-cancel-on-esc-key="true">
  <h2>{{dialogTitle}}</h2>
  <p *ngIf="dialogSubtitle">{{dialogSubtitle}}</p>
  <div class="vt-form" *ngIf="form">
    <div *ngIf="actionWord=='Create'" class="vt-form-member">
      <paper-item>Name: </paper-item>
      <paper-input [(ngModel)]="NKS.name" autofocus on-change="test" auto-validate pattern="^(?!\s*$).+" required="true" error-message="must use at least one non-space character" label=" name"></paper-input>
    </div>
    <div class="vt-form-member">
      <paper-item>Sharding Col. Name: </paper-item>
      <paper-input [(ngModel)]="NKS.shardingColumnName" label="Column Name"></paper-input>
    </div>
    <div *ngIf="NKS.shardingColumnName" class="vt-form-member">
      <paper-item>Sharding Col. Type: </paper-item>
      <paper-dropdown-menu  label="Column Type"  on-iron-select="typeSelected($event)">
        <paper-listbox selected="{{NKS.shardingColumnType}}"  attr-for-selected=label class="dropdown-content" >
          <paper-item label="UINT64">unsigned bigint</paper-item>
          <paper-item label="BYTES">varbinary</paper-item>
        </paper-listbox> 
      </paper-dropdown-menu>
    </div>
  </div>
  <div class="buttons">
    <paper-button   onClick="modal.close()" on-click="toggleForm()">Cancel</paper-button>
    <span *ngIf="NKS.name">
      <paper-button   onClick="modal.close();toast.open()" on-click="toggleForm();actionFunction()">{{actionWord}}</paper-button>
    </span>
    <span *ngIf="!NKS.name">
      <paper-button  disabled="true">{{actionWord}}</paper-button>
    </span>
  </div>
</paper-dialog>
<div *ngIf="openModal" class="vt-popUpContainer" >
</div>

<paper-toast id="toast" text="{{actionWordPast}} Keyspace {{NKS.name}}"></paper-toast>