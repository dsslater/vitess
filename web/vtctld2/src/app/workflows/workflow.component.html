<div class="vt-workflow {{getWorkflowClass()}}" *ngIf="workflow">
  <div class="vt-workflow-content">
    <table>
      <td class="vt-msg">
        {{workflow.message}}
      </td>
      <td class="vt-log">
        <p-accordion>
          <p-accordionTab [disabled]="workflow.log.length === 0">
          <header class="vt-accordion-name">
            Log
          </header>
          {{workflow.log}}
          </p-accordionTab>
        </p-accordion>
      </td>
    </table>
    <span *ngIf="getTime()" class="vt-workflow-time">Last Change: {{getTime()}}</span>
  </div>
  <div class="vt-actions">
    <span *ngFor="let action of workflow.actions">
      <button md-raised-button disableRipple=true [disabled]="action.isDisabled()" class="{{getActionClass(action.style)}}">{{action.name}}</button>
    </span>
  </div>
  <div class="vt-drawer">
    <p-accordion *ngFor="let child of workflow.children; let i = index">
      <span>
        <p-accordionTab>
          <header class="vt-pad-header">
            <div class="vt-accordion-header vt-accordion-name-wrapper">
              <span class="vt-accordion-name">
                <md-icon *ngIf="child.isDone()">check</md-icon>
                <md-icon *ngIf="child.isRunning()">forward</md-icon>
                <md-icon *ngIf="child.isNotStarted()">remove</md-icon>
                {{child.name}}
              </span>
            </div>
            <div class="vt-accordion-header vt-progress-bar-wrapper">
              <md-progress-bar class="vt-progress-bar" *ngIf="child.isDeterminate()" mode="determinate" [value]="child.progress" color="primary"></md-progress-bar>
              <md-progress-bar class="vt-accordion-header vt-progress-bar" *ngIf="child.isIndeterminate()" mode="indeterminate" color="primary"></md-progress-bar>
            </div>
            <div class="vt-accordion-header vt-progress-msg-wrapper" *ngIf="child.isDeterminate() || child.isIndeterminate()" >
              <span class="vt-progress-msg">
                {{child.progressMsg}}
              </span>
            </div>
          </header>
          <vt-workflow [(workflow)]="workflow.children[i]"></vt-workflow>
        </p-accordionTab>
      </span>
    </p-accordion>
  </div>
</div>